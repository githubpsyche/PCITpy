---

title: Data Pre-Processing


keywords: fastai
sidebar: home_sidebar



nb_path: "01_Data_Preprocessing.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 01_Data_Preprocessing.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Missing and/or incorrect parameters initialized in <a href="/pcitpy/Parameter_Configuration.html#run_importance_sampler"><code>run_importance_sampler</code></a> are reset in <a href="/pcitpy/Data_Preprocessing.html#preprocessing_setup"><code>preprocessing_setup</code></a>. <a href="/pcitpy/Data_Preprocessing.html#preprocessing_setup"><code>preprocessing_setup</code></a> also preprocesses data based on the specified parameter configuration. From the parameter settings in Table 2 of the P-CIT Toolbox Manual, we see that the predictor variable can be z-scored and outliers can be dropped. We also can generate bootstrap data, scramble the dependent variable, scale the predictor variable between 0 and 1 (this is a mandatory step), and we can perform the analysis on one or more categories while leaving out data from irrelevant categories. Trials where the predictor variable is set to NaN are filtered out (rows removed) for purposes of z-scoring, dropping outliers and scaling. These filtered rows are appended to the data matrix following those pre-processing steps. For,</p>
<p><strong>Simple data</strong> analysis (includes both think/no-think and simulated data) the order of pre-processing
is:</p>
<ol>
<li>Filter out irrelevant category data entries (rows) from the data matrix</li>
<li>Drop outliers in the predictor variable, if drop outliers &gt; 0</li>
<li>Z-score predictor-variable data within subjects, if zscore within subjects = TRUE</li>
<li>Scale predictor variable between 0 and 1</li>
</ol>
<p><strong>Bootstrap data</strong> analysis the order of pre-processing is:</p>
<ol>
<li>Generate bootstrap data from the original data matrix (see the "Nonparametric statistical tests" section of the main paper, and Section 4.8 of the Manual).</li>
<li>Filter out irrelevant category data entries (rows) from the data matrix</li>
<li>Drop outliers in the predictor variable, if drop outliers &gt; 0</li>
<li>Z-score predictor-variable data within subjects, if zscore within subjects = TRUE</li>
<li>Scale predictor variable between 0 and 1</li>
</ol>
<p><strong>Scramble data</strong> analysis the order of pre-processing is:</p>
<ol>
<li>Filter out irrelevant category data entries (rows) from the data matrix</li>
<li>Drop outliers in the predictor variable, if drop outliers &gt; 0</li>
<li>Z-score predictor-variable data within subjects, if zscore within subjects = TRUE</li>
<li>Scale predictor variable between 0 and 1</li>
<li>Scramble the dependent variable depending on the scrambling technique (see the "Nonparametric statistical tests" section of the main paper, and Section 4.8 of the Manual).</li>
</ol>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="preprocessing_setup" class="doc_header"><code>preprocessing_setup</code><a href="https://github.com/githubpsyche/pcitpy/tree/master/pcitpy/preprocessing_setup.py#L20" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>preprocessing_setup</code>(<strong><code>data</code></strong>, <strong><code>analysis_settings</code></strong>)</p>
</blockquote>
<p>Performs sanity checks on the input data and the algorithm parameter struct. Massages the data (i.e. drop outliers,
zscore data, etc).</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li>data: Input data matrix (total number of trials x 6 columns)</li>
<li>analysis_settings: Struct with algorithm parameters</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li>data: Input data matrix (if applicable, outlier free, zscored, category specific data only, etc)</li>
<li>analysis_settings: Struct with algorithm parameters; some additional parameters are added to this struct as well</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The function can be run in isolation from the toolbox pipeline very concisely. For example:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pcitpy.run_importance_sampler</span> <span class="kn">import</span> <span class="n">run_importance_sampler</span>


<span class="n">preprocessing_setup</span><span class="p">(</span><span class="n">run_importance_sampler</span><span class="p">(</span><span class="n">run_sampler</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>However, this isn't a typical use case for the function. The <a href="/pcitpy/Curve_Fitting.html#importance_sampler"><code>importance_sampler</code></a> module calls the function directly
at start of execution, making manual execution of <a href="/pcitpy/Data_Preprocessing.html#preprocessing_setup"><code>preprocessing_setup</code></a> redundant.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="scramble_dependent_variable" class="doc_header"><code>scramble_dependent_variable</code><a href="https://github.com/githubpsyche/pcitpy/tree/master/pcitpy/preprocessing_setup.py#L437" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>scramble_dependent_variable</code>(<strong><code>target_dependent_variables</code></strong>, <strong><code>target_net_effect_clusters</code></strong>, <strong><code>testing</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Takes dependent variable vector and scramble it such that the net effect cluster groupings are NOT violated.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li>target_dependent_variables: The vector you would like scrambled</li>
<li>target_net_effect_clusters: The groupings that you would like to NOT violate. Follow the example below</li>
</ul>
<p><strong>Returns</strong> a scrambled vector</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>While <a href="/pcitpy/Data_Preprocessing.html#preprocessing_setup"><code>preprocessing_setup</code></a> is hard to demonstrate in isolation, its helper function <a href="/pcitpy/Data_Preprocessing.html#scramble_dependent_variable"><code>scramble_dependent_variable</code></a> is straightforward to illustrate:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">scramble_dependent_variable</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>array([1., 1., 1., 0., 0., 1., 0.])</code></p>

</div>
</div>
</div>
</div>
 

